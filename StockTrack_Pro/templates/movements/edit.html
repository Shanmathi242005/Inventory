{% extends "layout.html" %}

{% block content %}
<div class="page-header">
    <h2>‚úèÔ∏è Edit Movement</h2>
    <p>Update movement details</p>
</div>

<div class="form-container">
    <form method="POST" class="movement-form">
        <div class="form-group">
            <label for="movement_id">Movement ID</label>
            <input type="text" id="movement_id" name="movement_id" class="form-control" 
                   value="{{ movement.movement_id }}" readonly>
            <small class="form-text">Movement ID cannot be changed</small>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="from_location">From Location</label>
                <select id="from_location" name="from_location" class="form-control">
                    <option value="">-- Select Source Location --</option>
                    {% for location in locations %}
                    <option value="{{ location.location_id }}" {% if movement.from_location == location.location_id %}selected{% endif %}>
                        {{ location.location_name }} ({{ location.location_id }})
                    </option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label for="to_location">To Location</label>
                <select id="to_location" name="to_location" class="form-control">
                    <option value="">-- Select Destination Location --</option>
                    {% for location in locations %}
                    <option value="{{ location.location_id }}" {% if movement.to_location == location.location_id %}selected{% endif %}>
                        {{ location.location_name }} ({{ location.location_id }})
                    </option>
                    {% endfor %}
                </select>
            </div>
        </div>

        <div class="form-group">
            <label for="product_id">Product *</label>
            <select id="product_id" name="product_id" class="form-control" required>
                <option value="">-- Select Product --</option>
                {% for product in products %}
                <option value="{{ product.product_id }}" {% if movement.product_id == product.product_id %}selected{% endif %}>
                    {{ product.product_name }} ({{ product.product_id }})
                </option>
                {% endfor %}
            </select>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="quantity">Quantity *</label>
                <input type="number" id="quantity" name="quantity" class="form-control" 
                       value="{{ movement.quantity }}" min="1" required>
            </div>

            <div class="form-group">
                <label for="notes">Notes</label>
                <input type="text" id="notes" name="notes" class="form-control" 
                       value="{{ movement.notes or '' }}" placeholder="Optional notes">
            </div>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-success">üíæ Update Movement</button>
            <a href="{{ url_for('movements_list') }}" class="btn btn-secondary">‚ùå Cancel</a>
        </div>
    </form>
</div>
{% endblock %}